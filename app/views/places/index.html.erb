<%= render :partial => "/layouts/navbar" %>
<div class="clear-fix"></div>
<div id="day_selection">
  <%= render :partial => "/places/day_selection", :locals => { date: 'today', distance: ""} %>
</div>
<div class="clearfix"></div>
<%= render :partial => "/events/mapjs"   %>
<div class="clearfix"></div>
<%= render :partial => "/places/footer"   %>
<div class="clearfix"></div>
<div class="call_to_action">
  <p>
    Hey！先在地圖上選擇附近推薦的球場然後選日期查看活動，或者搜索別的地點附近球場的資訊就可以秒速參加籃球鬥牛活動了！
  </p>
</div>
<script>
  $(document).ready(function() {
    $('.navicons a').each(function(index, element ){
      if (getURLParameter(element.href, 'place_id') == null) {      
        element.addEventListener("click", preventfromDefault);
        element.addEventListener("click", function(){
          if (getURLParameter(element.href, 'place_id') != null) {
            element.removeEventListener("click", preventfromDefault);
            element.click()
          }
        });
      }
    });
    $('#day_selection a').each(function(index, element ){
      if (getURLParameter(element.href, 'distance') == null) {      
        element.addEventListener("click", preventfromDefault);
        element.addEventListener("click", function(){
          if (getURLParameter(element.href, 'distance') != null) {
            element.removeEventListener("click", preventfromDefault);
            element.click()
          }
        });
      }
    });
    function preventfromDefault(event) {
      event.preventDefault();
      event.stopPropagation()
    };
    function getURLParameter(url, name) {
      return (RegExp(name + '=' + '(.+?)(&|$)').exec(url)||[,null])[1];
    };
  });
</script>  